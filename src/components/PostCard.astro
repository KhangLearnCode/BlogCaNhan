---
import { slugify } from '../lib/slug';

export interface Props{
  url: string;
  title: string;
  description?: string;
  pubDate?: string | Date;
  tags?: string[];
}
const { url, title, description, pubDate, tags = [] } = Astro.props as Props;
const d = pubDate ? new Date(pubDate) : undefined;
const basePath = Astro.site ? new URL(Astro.site).pathname.replace(/\/$/, '') : '';
---
<a class="card" href={url}>
  <div class="meta">{d ? d.toLocaleDateString('vi-VN') : ''}</div>
  <h3>{title}</h3>
  {description && <p style="color:var(--muted); margin:.2rem 0 .4rem">{description}</p>}
  {tags.length > 0 && <div class="tags">
    {tags.map((t) => <a class="tag" href={`${basePath}/tags/${slugify(t)}`}>{t}</a>)}
  </div>}
</a>
