---
import { slugify } from '../lib/slug';

export interface Props{
  url: string;
  title: string;
  description?: string;
  pubDate?: string | Date;
  tags?: string[];
}
const { url, title, description, pubDate, tags = [] } = Astro.props as Props;
const d = pubDate ? new Date(pubDate) : undefined;
const basePath = Astro.site ? new URL(Astro.site).pathname.replace(/\/$/, '') : '';
---
<article class="card">
  <div class="meta">{d ? d.toLocaleDateString('vi-VN') : ''}</div>
  <h3>
    <a class="title-link" href={url} aria-label={`Xem bÃ i: ${title}`}>{title}</a>
  </h3>
  {description && <p style="color:var(--muted); margin:.2rem 0 .4rem">{description}</p>}
  {tags.length > 0 && <div class="tags">
    {tags.map((t) => <a class="tag" href={`${basePath}/tags/${slugify(t)}`}>{t}</a>)}
  </div>}
</article>
