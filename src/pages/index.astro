---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import PostCard from '../components/PostCard.astro';

const latest = await Astro.glob('./blog/*.md');
latest.sort((a,b)=> new Date(b.frontmatter.pubDate||0).getTime() - new Date(a.frontmatter.pubDate||0).getTime());
const top3 = latest.slice(0,3);
const basePath = Astro.site ? new URL(Astro.site).pathname.replace(/\/$/, '') + '/' : '/';
---
<BaseLayout title="LÃª Nguyá»…n Duy Khang â€“ Blog cÃ¡ nhÃ¢n" description="Portfolio blog cá»§a LÃª Nguyá»…n Duy Khang: chia sáº» vá» Java, JavaScript vÃ  láº­p trÃ¬nh máº¡ng mÃ¡y tÃ­nh.">
  <Nav />
  <main class="container">
    <section class="hero">
      <div>
        <h1>Xin chÃ o, mÃ¬nh lÃ  <span style="color:var(--primary)">LÃª Nguyá»…n Duy Khang</span> ğŸ‘‹</h1>
        <p>
          Sinh viÃªn nÄƒm 4 â€“ ChuyÃªn ngÃ nh CÃ´ng nghá»‡ Pháº§n má»m, HUTECH.
          MÃ¬nh xÃ¢y dá»±ng blog nÃ y Ä‘á»ƒ tá»•ng há»£p vÃ  chia sáº» kiáº¿n thá»©c vá» Java, JavaScript
          vÃ  Ä‘áº·c biá»‡t lÃ  láº­p trÃ¬nh máº¡ng mÃ¡y tÃ­nh.
        </p>
        <div class="badges">
          <span class="badge">Java</span>
          <span class="badge">JavaScript</span>
          <span class="badge">Networking</span>
          <span class="badge">OOP</span>
          <span class="badge">Web</span>
        </div>
        <div style="display:flex; gap:12px; flex-wrap:wrap">
          <a class="btn" href="/blog">ğŸ“ Xem Blog</a>
          <a class="btn" style="background:linear-gradient(135deg,var(--brand),var(--primary))" href="https://github.com/KhangLearnCode" target="_blank" rel="noreferrer">â­ GitHub</a>
        </div>
      </div>
      <div class="avatar">
        <img
          src={`${basePath}images/avatar.jpg`}
          alt="áº¢nh Ä‘áº¡i diá»‡n cá»§a LÃª Nguyá»…n Duy Khang"
          width="768"
          height="1152"
          loading="lazy"
          decoding="async"
        />
      </div>
    </section>

    <section class="section">
      <h2 style="margin:0 0 16px">BÃ i viáº¿t má»›i</h2>
      <div class="grid">
        {top3.map((p) => (
          <PostCard url={p.url} title={p.frontmatter.title} description={p.frontmatter.description} pubDate={p.frontmatter.pubDate} tags={p.frontmatter.tags} />
        ))}
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>
