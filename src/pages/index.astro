---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import PostCard from '../components/PostCard.astro';

const latest = await Astro.glob('./blog/*.md');
latest.sort((a,b)=> new Date(b.frontmatter.pubDate||0).getTime() - new Date(a.frontmatter.pubDate||0).getTime());
const top3 = latest.slice(0,3);

// Prefix base khi deploy d∆∞·ªõi subpath (v√≠ d·ª•: /BlogCaNhan)
const basePath = Astro.site ? new URL(Astro.site).pathname.replace(/\/$/, '') + '/' : '/';
---
<BaseLayout title="L√™ Nguy·ªÖn Duy Khang ‚Äì Blog c√° nh√¢n" description="Blog chia s·∫ª v·ªÅ Java, JavaScript v√† l·∫≠p tr√¨nh m·∫°ng (TCP/UDP, Socket, WebSocket). Ghi ch√∫ h·ªçc t·∫≠p, demo th·ª±c t·∫ø v√† kinh nghi·ªám tri·ªÉn khai.">
  <Nav />
  <main class="container">
    <section class="hero">
      <div>
        <h1>Xin ch√†o, t√¥i l√† <span style="color:var(--primary)">L√™ Nguy·ªÖn Duy Khang</span> üëã</h1>
        <p style="color:var(--muted); font-size:1.05rem">
          Sinh vi√™n nƒÉm 4 C√¥ng ngh·ªá Ph·∫ßn m·ªÅm (HUTECH). T√¥i quan t√¢m t·ªõi <strong>Backend Java</strong>, 
          <strong>l·∫≠p tr√¨nh m·∫°ng</strong> (TCP/UDP, Socket, WebSocket) v√† ph√°t tri·ªÉn web v·ªõi <strong>JavaScript</strong>.
          Blog n√†y l√† n∆°i t√¥i <strong>h·ªá th·ªëng ho√° ki·∫øn th·ª©c</strong>, chia s·∫ª ghi ch√∫ h·ªçc t·∫≠p v√† c√°c <strong>demo th·ª±c t·∫ø</strong>.
        </p>
        <p style="color:var(--muted); margin:.6rem 0 1.1rem">
          M·ª•c ti√™u c·ªßa t√¥i l√† x√¢y d·ª±ng c√°c <strong>d·ªãch v·ª• backend d·ªÖ d√πng, an to√†n v√† c√≥ th·ªÉ m·ªü r·ªông</strong>, 
          ƒë·ªìng th·ªùi lan to·∫£ ki·∫øn th·ª©c cho c·ªông ƒë·ªìng th√¥ng qua c√°c b√†i vi·∫øt r√µ r√†ng v√† c√≥ v√≠ d·ª• k√®m theo.
        </p>

        <div class="badges" aria-label="Lƒ©nh v·ª±c quan t√¢m">
          <span class="badge">Java</span>
          <span class="badge">Spring Boot</span>
          <span class="badge">Networking</span>
          <span class="badge">WebSocket</span>
          <span class="badge">REST API</span>
          <span class="badge">JavaScript</span>
        </div>

        <div style="display:flex; gap:12px; flex-wrap:wrap">
          <a class="btn" href={`${basePath}blog`}>üìù Xem Blog</a>
          <a class="btn" style="background:linear-gradient(135deg,var(--brand),var(--primary))" href={`${basePath}about`}>üë§ V·ªÅ t√¥i</a>
          <a class="btn" style="background:linear-gradient(135deg,var(--primary),var(--accent))" href={`${basePath}thanh-tich`}>üèÜ D·ª± √°n & Ch·ª©ng ch·ªâ</a>
        </div>
      </div>

      <div class="avatar" aria-label="·∫¢nh ƒë·∫°i di·ªán">
        <img
          src={`${basePath}images/avatar.jpg`}
          alt="·∫¢nh ƒë·∫°i di·ªán c·ªßa L√™ Nguy·ªÖn Duy Khang"
          width="768"
          height="1152"
          loading="lazy"
          decoding="async"
        />
      </div>
    </section>

    <section class="section">
      <h2 style="margin:0 0 12px">B√†i vi·∫øt m·ªõi</h2>
      <div class="grid">
        {top3.map((p) => (
          <PostCard
            url={p.url}
            title={p.frontmatter.title}
            description={p.frontmatter.description}
            pubDate={p.frontmatter.pubDate}
            tags={p.frontmatter.tags}
          />
        ))}
      </div>
      <div style="margin-top:14px">
        <a class="badge" href={`${basePath}blog`}>Xem t·∫•t c·∫£ b√†i vi·∫øt ‚Üí</a>
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>
