---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

const basePath = Astro.site ? new URL(Astro.site).pathname.replace(/\/$/, '') : '';

const achievements = [
  {
    year: '2025',
    title: 'Demo Socket Chat (Java + WebSocket)',
    desc: 'Xây dựng mẫu chat thời gian thực, quản lý kết nối, broadcast message.',
    tags: ['Java','WebSocket','Networking'],
  },
  {
    year: '2024',
    title: 'REST API Notes (Spring Boot)',
    desc: 'API CRUD ghi chú, phân lớp Controller/Service/Repository, trả về JSON chuẩn.',
    tags: ['Java','Spring Boot','REST'],
  },
  {
    year: '2024',
    title: 'CI/CD với GitHub Actions',
    desc: 'Build SSG Astro, upload artifact và deploy GitHub Pages tự động.',
    tags: ['CI/CD','GitHub Actions','Astro'],
  },
];

// KHAI BÁO CHỨNG CHỈ: cập nhật đường dẫn Credly thật sau khi bạn có URL
const certificates = [
  {
    title: 'Networking Basics',
    issuer: 'Cisco Networking Academy',
    issued: '2025',
    img: 'certificates/networking-basics.jpg',  // thumbnail (ảnh xuất từ PDF)
    pdf: 'certificates/networking-basics.pdf',  // file PDF đầy đủ
    credly: 'https://www.credly.com/earner/earned/share/e78f6962-f91c-43c3-b386-ecbc69f7df65', 
  },
  {
    title: 'JavaScript Essentials 1',
    issuer: 'Cisco Networking Academy',
    issued: '2025',
    img: 'certificates/javascript-essentials-1.jpg',
    pdf: 'certificates/javascript-essentials-1.pdf',
    credly: 'https://www.credly.com/earner/earned/share/696f8e36-048b-46a1-8c07-8423637397f4',
  },
  {
    title: 'JavaScript Essentials 2',
    issuer: 'Cisco Networking Academy',
    issued: '2025',
    img: 'certificates/javascript-essentials-2.jpg',
    pdf: 'certificates/javascript-essentials-2.pdf',
    credly: 'https://www.credly.com/earner/earned/share/495bd213-fda4-4598-ae2f-2577b91dfce3?provider=download',
  },
];
---
<BaseLayout title="Thành tích • Lê Nguyễn Duy Khang" description="Một số dự án và chứng chỉ tiêu biểu.">
  <Nav />
  <main class="container section">
    <h1>Thành tích</h1>

    <section style="margin: 12px 0 26px">
      <h2 style="margin:.2rem 0 12px">Dự án / Thành tích kỹ thuật</h2>
      <div class="grid">
        {achievements.map((a) => (
          <div class="card">
            <div class="meta">{a.year}</div>
            <h3>{a.title}</h3>
            <p style="color:var(--muted)">{a.desc}</p>
            <div class="tags">
              {a.tags.map((t) => <span class="tag">{t}</span>)}
            </div>
          </div>
        ))}
      </div>
    </section>

    <section style="margin: 22px 0 0">
      <h2 style="margin:.2rem 0 12px">Chứng chỉ</h2>
      <p style="color:var(--muted); margin: 0 0 12px">
        Ảnh dưới đây là thumbnail (xuất từ PDF). Bạn có thể bấm “Xem PDF” để mở chứng chỉ đầy đủ hoặc “Xem trên Credly”.
      </p>
      <div class="grid">
        {certificates.map((c) => (
          <div class="card" style="overflow:hidden">
            <img
              src={`${basePath}/${c.img}`}
              alt={`Chứng chỉ ${c.title} – ${c.issuer}`}
              style="width:100%; aspect-ratio: 4 / 3; object-fit: cover; border-radius:12px; border:1px solid rgba(255,255,255,.08);"
              loading="lazy"
              decoding="async"
            />
            <div class="meta" style="margin-top:8px">{c.issuer} • {c.issued}</div>
            <h3 style="margin:.4rem 0 .4rem">{c.title}</h3>
            <div style="display:flex; gap:10px; flex-wrap:wrap">
              <a class="btn" href={`${basePath}/${c.pdf}`} target="_blank" rel="noreferrer" aria-label={`Xem PDF: ${c.title}`}>📄 Xem PDF</a>
              <a class="btn" style="background:linear-gradient(135deg,var(--brand),var(--primary))" href={c.credly} target="_blank" rel="noreferrer" aria-label={`Xem trên Credly: ${c.title}`}>🔗 Xem trên Credly</a>
            </div>
          </div>
        ))}
      </div>
    </section>
  </main>
  <Footer />
</BaseLayout>
